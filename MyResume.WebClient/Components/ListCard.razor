@using MyResume.WebClient.Application.Responses.JobSeekerResponses
@using MyResume.WebClient.Components.Cards
@using MyResume.WebClient.Enums
@inject IJobSeekerService jobSeekerService

<FluentStack Orientation="Orientation.Vertical">
    @if (_SelectedFilter == SelectedFilter.OnVacancy)
    {
        <VacancyCard/>
        <VacancyCard/>
    }
    else if (_SelectedFilter == SelectedFilter.OnResume)
    {
        @if (JobSeekerOnCardList is not null)
            @foreach (var item in JobSeekerOnCardList)
            {
                <ResumeCard JobSeekerOnCard="item" />
            }
        else
        {
            <SkeletonCard/>
        }
    }
    else if (_SelectedFilter == SelectedFilter.OnCompany)
    {
        <CompanyCard/>
    }
</FluentStack>

@code {
    [Parameter]
    public SelectedFilter? _SelectedFilter { get; set; }

    private List<InfoOnCardJobSeekerResponse> JobSeekerOnCardList { get; set; }

    protected override async Task OnInitializedAsync()
    {
        await LoadJobSeekerOnCard();
    }

    private async Task LoadJobSeekerOnCard()
    {
        await Task.Delay(3000);
        var cards = await jobSeekerService.GetInfoOnCardOnList();
        JobSeekerOnCardList = cards;
    }
}
